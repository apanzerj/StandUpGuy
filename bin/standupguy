#!/usr/bin/env ruby
require "standupguy"
require "optparse"
require "launchy"

options = {}

OptionParser.new do |opts|
  opts.banner = "Usage: sug [options]"

  opts.on("-r", "--report=FORMAT", "Show an HTML report") do |r|
    options[:report] = r
  end

  opts.on("-d", "--date=YYYY-MM-DD", "Date of standup. ALL for all") do |date|
    options[:date] = date
  end
end.parse!

item = ARGV.join(" ")

unless options[:report]
  new_item = StandUpGuy::Item.new
  new_item.add_to_today(item)
  new_item.save
  report = StandUpGuy::TextReport.new
  report.show
else
  report = begin
    case options[:report] 
    when "HTML"
      StandUpGuy::HTMLReport.new(options[:date])
    when "TEXT"
      StandUpGuy::TextReport.new(options[:date])
    end
  end
  report.show
end